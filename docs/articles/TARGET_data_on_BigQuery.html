<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>TARGET Data in Google Bigquery &bull; TARGETCloud</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">TARGETCloud</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>TARGET Data in Google Bigquery</h1>
                        <h4 class="author">Sean Davis</h4>
            
            <h4 class="date">November 10, 2016</h4>
          </div>

    
    
<div class="contents">
<div id="background-and-motivation" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#background-and-motivation" class="anchor"> </a></body></html>Background and Motivation</h2>
<p>Two significant data barriers exist in leveraging large-scale genomic data.</p>
<ol style="list-style-type: decimal"><li>Data munging to harmonize and format data into useful forms.</li>
<li>General approaches to data integration that can be performed in an interactive, <em>ad hoc</em> environment, <strong>at scale</strong>.</li>
</ol><p>To reduce these barriers, we have undertaken to leverage a cloud-scale data warehouse technology, <a href="#bigquery">BigQuery</a>, as an analytics platform for the public-access data in the <a href="#the-target-project">the TARGET project</a>.</p>
<div id="the-target-project" class="section level3">
<h3 class="hasAnchor"><html><body><a href="#the-target-project" class="anchor"> </a></body></html>The TARGET Project</h3>
<p>The <a href="https://target.nci.nih.gov">NCI TARGET project</a> is the childhood cancer equivalent of the adult TCGA project. The TARGET project is composed of datasets from six diseases:</p>
<ul><li>Acute Myelogenous Leukemia</li>
<li>Acute Lymphocytic Leukemia</li>
<li>Neuroblastoma</li>
<li>Osteosarcoma</li>
<li>Rhabdomysarcoma</li>
<li>Kidney tumors
<ul><li>Wilms tumor</li>
<li>Clear Cell Sarcoma of the Kidney</li>
<li>Rhabdoid Tumor of the Kidney</li>
</ul></li>
</ul><p>Like the TCGA project, these projects have each been collecting samples and then assaying these samples using multiple genomics platforms. Accompanying clinical information is also available. Each project team has been primarily responsible for their own analysis and quality control which has resulted in a set of data for each platform for each project. Depending on the assay, platform, and analysis pipelines, data are typically available at multiple &ldquo;levels&rdquo;. The so-called <em>level 3</em> data are typically gene-level or genomic-region-level summaries.</p>
</div>
<div id="bigquery" class="section level3">
<h3 class="hasAnchor"><html><body><a href="#bigquery" class="anchor"> </a></body></html>BigQuery</h3>
<p>Although there is not a general solution for solving both 1 and 2, <a href="https://cloud.google.com/bigquery/">BigQuery</a> is Google&rsquo;s fully managed, petabyte scale, enterprise data warehouse for analytics. BigQuery is serverless meaning that there is no infrastructure to manage and you don&rsquo;t need a database administrator, so you can focus on analyzing data to find meaningful insights using familiar SQL. Because BigQuery operates at cloud scale, data integration between disparate datasets is as simple as doing a join, even between datasets provided by other groups. Data munging can be done once to produce the &ldquo;data warehouse&rdquo;. Further data munging and transformations can then be done at nearly arbitrary scales using industry-standard (or nearly) SQL-based tooling. BigQuery data can be accessed in several different ways, including a <a href="https://cloud.google.com/bigquery/quickstart-web-ui">web-based user interface</a> and a <a href="https://cloud.google.com/bigquery/quickstart-command-line">command-line client</a>. The <a href="https://cran.r-project.org/package=bigrquery">bigrquery R package</a> by Hadley Wickham provides access to BigQuery from R; I will focus usage in this document on the bigrquery interface and its utility in R.</p>
</div>
</div>
<div id="accessing-target-using-bigrquery" class="section level2">
<h2 class="hasAnchor"><html><body><a href="#accessing-target-using-bigrquery" class="anchor"> </a></body></html>Accessing TARGET Using bigrquery</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(bigrquery)
PROJECT=<span class="st">'isb-cgc-01-0006'</span></code></pre></div>
<pre><code>## [1] "target_aml"  "target_ccsk" "target_nbl"  "target_os"   "target_rt"  
## [6] "target_wt"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list_datasets</span>(PROJECT)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(plyr)
x =<span class="st"> </span><span class="kw">rbind.fill</span>(<span class="kw"><a href="../reference/fixColnamesForBigQuery.html">fixColnamesForBigQuery</a></span>(wtmaf),<span class="kw"><a href="../reference/fixColnamesForBigQuery.html">fixColnamesForBigQuery</a></span>(allmaf),<span class="kw"><a href="../reference/fixColnamesForBigQuery.html">fixColnamesForBigQuery</a></span>(amlmaf),<span class="kw"><a href="../reference/fixColnamesForBigQuery.html">fixColnamesForBigQuery</a></span>(nblmaf))
job =<span class="st"> </span>bigrquery::<span class="kw">insert_upload_job</span>(<span class="st">'isb-cgc-01-0006'</span>,<span class="st">'NCI_TARGET_Project'</span>,<span class="st">'mafs_all'</span>,<span class="dt">values =</span> x,<span class="dt">write_disposition =</span> <span class="st">'WRITE_TRUNCATE'</span>)
<span class="co"># wait_for(job)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked"><li><a href="#background-and-motivation">Background and Motivation</a></li>
      <li><a href="#accessing-target-using-bigrquery">Accessing TARGET Using bigrquery</a></li>
      </ul></div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Henry Zhang, Sean Davis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer></div>

  </body></html>
